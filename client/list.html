<template name="listNav">
	{{> meteorNotices}}
	<nav class='navbar navbar-default' role='navigation'>
		<div class="container-fluid">
			<ul class="nav navbar-nav">
				<li>
					{{#with nav.addButton}}
						{{#control_button}}{{/control_button}}
					{{/with}}
				</li>
        {{#if nav.purgeButton}}
				<li>
					{{#with nav.purgeButton}}
						{{#control_button}}{{/control_button}}
					{{/with}}
				</li>
        {{/if}}
			</ul>
			<form class="navbar-form navbar-right" role='search'>
				<input type="text" class="search-query {{this.single}}-search-query form-control" placeholder="Search"/>
				<div class='reset hide {{this.single}}-search'></div>
			</form>
			<!-- <button id='{{this.title}}Help' class='btn btn-warning navbar-btn navbar-right help-button'>Help</button> -->
		</div>
	</nav>
</template>

<template name='_lists'>
	<div class="table-responsive">
		<table class="table list-table">
			<thead>
				<tr>
					{{#listColumnHeaders}}{{/listColumnHeaders}}
					<th>Controls</th>
				</tr>
			</thead>
			<tbody>
				{{#each lists}}
					{{#listRow}}{{/listRow}}
				{{/each}}
			</tbody>
		</table>
	</div>
</template>

<template name="_listColumnHeaders">
	{{#each columnHeaders}}
		<th>{{this}}</th>
	{{/each}}
</template>

<template name="_listRowColumn">
	<td>
		<span>{{value}}</span>
	</td>
</template>

<template name="_listRow">
	{{#with data}}
  	<tr class='{{row_css_class}} disabled_{{disabled}}'>
  		{{#each listFields}}
  			{{#listRowColumn data=.. field=this}}{{/listRowColumn}}
  		{{/each}}
  		<td class='text-center'>
  			{{#if status}}
  				{{#each rowControls.disabled}}
  					{{#control_button}}{{/control_button}}
  				{{/each}}
  			{{else}}
  				{{#each rowControls.enabled}}
  					{{#control_button}}{{/control_button}}
  				{{/each}}
  			{{/if}}
  			{{#if status}}
  			<div class='justify inline-block status-{{status}}'>
  			{{status}}
  			</div>
  			{{/if}}
  		</td>
  	</tr>
  	{{#if inlineForm}}
  	<tr id='{{_id}}' class='hidden form-row'>
  		<td colspan='{{Count listFields}}'>
        {{#if editDocument}}
  		    {{#ListForm data=../data form=form}}{{/ListForm}}
        {{/if}}
  		</td>
  	</tr>
  	{{/if}}
	{{/with}}
</template>

<template name='_listForm'>
  {{> UI.contentBlock}}
	{{#with data}}
	<form id='{{_id}}_form' class="{{../css}}" name='{{../form.name}}' role='form'>
		<div class='row'>
			{{#each ../fields}}
				{{#formField}}{{/formField}}
			{{/each}}
			<input type='submit' value='Save' class='btn btn-success col-md-4 col-md-offset-1'>
			<button class="close-form btn btn-danger col-md-4 col-md-offset-2">Cancel</button>
		</div>
	</form>
	{{/with}}
</template>

<template name='listInstructions'>
  <div>
    <p>
      Adding a list only adds the title, subject and grade for the list.  
      Once a list has been added additional options will appear allowing 
      one to add content to the list.  The subjects that are available to
      a list are determined by the classes setup within a district.
    </p>
    <ul>
      <li>{{control_button '' 'warning' 'pencil' '' 'Edit List'}} Edit a list.</li>
      <li>{{control_button '' 'danger' 'trash' '' 'Disable List'}} Disable a list.</li>
      <li>{{control_button '' 'success' 'repeat' '' 'Reinstate List'}} Reinstate a list.</li>
      <li>{{control_button '' 'danger' 'remove' '' 'Purge Disabled Lists' ''}} Purge disabled lists.</li>
      <li>{{control_button '' 'success' 'align-justify' '' 'Edit List Content'}} Edit a lists content.</li>
    </ul>
    
    <p>
      The search box will search lists by title. A limited regular expression syntax is available to allow for advanced searches.
    </p>
    <ul>
      <li>"^Iden" - Searches for lists that start with "Iden".  The "^" character indicates to search from the start of the entered text.</li>
      <li>"subject=science" - Searches for 'science' in the subject column.</li>
    </ul>

    <div class='alert alert-error'>
      <h4>WARNING!</h4>
      When a list is disabled all users that are currently in the list will be
      redirected to their class selection menu.
    </div>
  </div>
</template>


<template name="disableListItemConfirmation">
  Are you sure you want to disable this #{single}?
  <br>
  <br>
  <div class='alert alert-error'>
    <h4>Severe Warning</h4>
    No users will be able to use this #{single}.  This could lead to a service interruption. 
  </div>
</template>

